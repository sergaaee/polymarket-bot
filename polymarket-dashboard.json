{
  "dashboard": {
    "uid": "polymarket-bot-monitoring-2025",
    "title": "Polymarket Trading Bot â€” Monitoring",
    "tags": ["trading", "polymarket", "bot"],
    "style": "dark",
    "timezone": "browser",
    "editable": true,
    "graphTooltip": 1,
    "time": {
      "from": "now-6h",
      "to": "now"
    },
    "timepicker": {
      "refresh_intervals": ["5s", "10s", "30s", "1m", "5m", "15m", "30m", "1h"],
      "time_options": ["5m", "15m", "1h", "6h", "24h", "2d", "7d", "30d"]
    },
    "templating": {
      "list": [
        {
          "name": "asset",
          "type": "query",
          "query": "label_values(pm_orders_total, asset)",
          "datasource": "Prometheus",
          "multi": true,
          "includeAll": true,
          "allValue": ".*",
          "refresh": 1
        }
      ]
    },
    "annotations": { "list": [] },
    "refresh": "30s",
    "schemaVersion": 39,
    "version": 1,
    "panels": [
      {
        "type": "text",
        "title": "Overview",
        "content": "## Overview",
        "gridPos": { "x": 0, "y": 0, "w": 24, "h": 2 }
      },
      {
        "type": "stat",
        "title": "Request Latency (P50)",
        "datasource": "Prometheus",
        "targets": [
          {
            "expr": "histogram_quantile(0.50, sum(rate(pm_request_latency_seconds_bucket[5m])) by (le, service, method))",
            "legendFormat": "{{service}} - {{method}}",
            "refId": "A"
          }
        ],
        "fieldConfig": {
          "defaults": {
            "unit": "s",
            "thresholds": {
              "mode": "absolute",
              "steps": [
                { "color": "green", "value": null },
                { "color": "orange", "value": 0.3 },
                { "color": "red", "value": 1 }
              ]
            }
          }
        },
        "gridPos": { "x": 0, "y": 2, "w": 24, "h": 6 }
      },
      {
        "type": "stat",
        "title": "Orders Created (24h)",
        "datasource": "Prometheus",
        "targets": [
          {
            "expr": "sum(increase(pm_orders_total{asset!=\"total\"}[24h]))",
            "legendFormat": "All assets",
            "refId": "B"
          }
        ],
        "gridPos": { "x": 0, "y": 8, "w": 24, "h": 6 }
      },
      {
        "type": "gauge",
        "title": "Current PnL",
        "datasource": "Prometheus",
        "targets": [
          {
            "expr": "bot_pnl{asset!=\"total\"}",
            "instant": true,
            "refId": "C"
          }
        ],
        "fieldConfig": {
          "defaults": {
            "unit": "currencyUSD",
            "thresholds": {
              "mode": "absolute",
              "steps": [
                { "color": "red", "value": null },
                { "color": "orange", "value": 0 },
                { "color": "green", "value": 100 }
              ]
            }
          }
        },
        "gridPos": { "x": 0, "y": 14, "w": 24, "h": 6 }
      },
      {
        "type": "text",
        "title": "API Latency & Retries",
        "content": "## API Latency & Retries",
        "gridPos": { "x": 0, "y": 20, "w": 24, "h": 2 }
      },
      {
        "type": "heatmap",
        "title": "Request Latency Heatmap",
        "datasource": "Prometheus",
        "targets": [
          {
            "expr": "sum(rate(pm_request_latency_seconds_bucket[5m])) by (le)",
            "format": "heatmap",
            "legendFormat": "{{le}}",
            "refId": "D"
          }
        ],
        "fieldConfig": {
          "defaults": {
            "custom": {
              "scaleDistribution": { "type": "linear" },
              "color": { "mode": "spectrum" }
            }
          }
        },
        "options": { "calculate": true, "yAxis": { "unit": "s" } },
        "gridPos": { "x": 0, "y": 22, "w": 24, "h": 8 }
      },
      {
        "type": "timeseries",
        "title": "Request Latency Percentiles",
        "datasource": "Prometheus",
        "targets": [
          {
            "expr": "histogram_quantile(0.50, sum(rate(pm_request_latency_seconds_bucket[5m])) by (le, service, method))",
            "legendFormat": "P50 {{service}} {{method}}",
            "refId": "E"
          },
          {
            "expr": "histogram_quantile(0.95, sum(rate(pm_request_latency_seconds_bucket[5m])) by (le, service, method))",
            "legendFormat": "P95 {{service}} {{method}}",
            "refId": "F"
          },
          {
            "expr": "histogram_quantile(0.99, sum(rate(pm_request_latency_seconds_bucket[5m])) by (le, service, method))",
            "legendFormat": "P99 {{service}} {{method}}",
            "refId": "G"
          }
        ],
        "fieldConfig": { "defaults": { "unit": "s" } },
        "gridPos": { "x": 0, "y": 30, "w": 24, "h": 8 }
      },
      {
        "type": "timeseries",
        "title": "Retries by Operation",
        "datasource": "Prometheus",
        "targets": [
          {
            "expr": "rate(retries_total[5m])",
            "legendFormat": "{{operation}}",
            "refId": "H"
          }
        ],
        "gridPos": { "x": 0, "y": 38, "w": 24, "h": 6 }
      },
      {
        "type": "text",
        "title": "Orders (Regular)",
        "content": "## Orders (Regular)",
        "gridPos": { "x": 0, "y": 44, "w": 24, "h": 2 }
      },
      {
        "type": "timeseries",
        "title": "Orders Lifecycle (stacked)",
        "datasource": "Prometheus",
        "targets": [
          { "expr": "rate(pm_orders_total[5m])",         "legendFormat": "Created",   "refId": "I" },
          { "expr": "rate(pm_orders_matched_total[5m])", "legendFormat": "Matched",   "refId": "J" },
          { "expr": "rate(orders_partial_total[5m])",    "legendFormat": "Partial",   "refId": "K" },
          { "expr": "rate(orders_cancelled_total[5m])",  "legendFormat": "Cancelled", "refId": "L" }
        ],
        "fieldConfig": { "defaults": { "stacking": { "mode": "normal" } } },
        "gridPos": { "x": 0, "y": 46, "w": 24, "h": 8 }
      },
      {
        "type": "text",
        "title": "Profit & Loss",
        "content": "## Profit & Loss",
        "gridPos": { "x": 0, "y": 54, "w": 24, "h": 2 }
      },
      {
        "type": "timeseries",
        "title": "PnL over time",
        "datasource": "Prometheus",
        "targets": [
          { "expr": "bot_pnl{asset!=\"total\"}", "legendFormat": "{{asset}}", "refId": "M" }
        ],
        "fieldConfig": { "defaults": { "unit": "currencyUSD" } },
        "gridPos": { "x": 0, "y": 56, "w": 24, "h": 8 }
      }
    ]
  },
  "overwrite": true
}
